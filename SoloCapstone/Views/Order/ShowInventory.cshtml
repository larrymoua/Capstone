@model IEnumerable<SoloCapstone.Models.InventoryModel>


@{
    Layout = "~/Views/Shared/_LayoutLogIn.cshtml";
}

<h2>Inventory</h2>

<p>
    @Html.ActionLink("Create New", "CreateInventoryItem")
</p>
<div class="container" ng-app="SoloCapstone" ng-controller="mainController">

    <div class="alert alert-success">
        <p>Sort Type: {{ sortType }}</p>
    </div>
    <form>
        <div class="form-group">
            <div class="input-group">
                <div class="input-group-addon"><i class="fa fa-search"></i></div>
                <input type="text" class="form-control" placeholder="Search Inventory Item" ng-model="searchInventory">
            </div>
        </div>
    </form>

    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <td>
                    <a href="#" ng-click="sortType = 'ItemName'; sortReverse = !sortReverse">
                        Item Name
                        <span ng-show="sortType == 'Item Name' && !sortReverse" class="fa fa-caret-down"></span>
                        <span ng-show="sortType == 'Item Name' && sortReverse" class="fa fa-caret-up"></span>
                    </a>
                </td>
                <td>
                    <a href="#" ng-click="sortType = 'Quantity'; sortReverse = !sortReverse">
                        Quantity
                        <span ng-show="sortType == 'Quantity' && !sortReverse" class="fa fa-caret-down"></span>
                        <span ng-show="sortType == 'Quantity' && sortReverse" class="fa fa-caret-up"></span>
                    </a>
                </td>
                <td>
                    <a href="#" ng-click="sortType = 'ItemPartNumber'; sortReverse = !sortReverse">
                        Item Part Number
                        <span ng-show="sortType == 'Item Part Number' && !sortReverse" class="fa fa-caret-down"></span>
                        <span ng-show="sortType == 'Item Part Number' && sortReverse" class="fa fa-caret-up"></span>
                    </a>
                </td>
    
            </tr>
        </thead>

        <tbody>
            <tr ng-repeat="item in items | orderBy:sortType:sortReverse | filter:searchInventory">
                <td>{{item.ItemName}}</td>
                <td>{{item.Quantity}}</td>
                <td>{{item.ItemPartNumber }}</td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ })|
                    @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ })|
                    @Html.ActionLink("Delete", "DeleteInventoryItem", new { /* id=item.PrimaryKey */ })|
                </td>
            </tr>
        </tbody>

    </table>

    <p class="text-center text-muted">
        <a href="#" target="_blank">Read the Tutorial</a>
    </p>

    <p class="text-center">
        by <a href="https://scotch.io" target="_blank">scotch.io</a>
    </p>

</div>
@section scripts
    {
    <script src="~/Scripts/angular.js"></script>
    <script>
        var app = angular.module('SoloCapstone', []);
        app.controller("mainController",function ($scope, $http) {
            $http.get('@Url.Action("GetAllInventoryItems", "Order")')
                .then(successCallback, errorCallback);

            function successCallback(data) {
                $scope.items = {};
                $scope.items = data.data;
            };
            function errorCallback(error) {
                //error code
            };
        });
        app.filter("mydate", function () {
            var re = /\/Date\(([0-9]*)\)\//;
            return function (x) {
                var m = x.match(re);
                if (m) return new Date(parseInt(m[1]));
                else return null;
            };
        });
    </script>

}
